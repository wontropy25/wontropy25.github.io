---
title: "1. Randomness and Paradox"
date: 2024-09-07 00:01:00 +0900
categories: [학부 수업, (3-2) Cryptography]
tags: [cryptography]     # TAG names should always be lowercase
math: true
mermaid: true
---

### [1.1] Basic Problem
---
![cry](assets/img/school_cry/cr1-1.png)

Alice가 Bob에게 어떤 암호 시스템을 이용하여 key를 통해 메시지 $m$을 $c$로 암호화하여 $c$를 보내고자 한다. 이 암호 시스템은 다음 두가지를 보장해야 한다.
- Bob이 암호화된 메시지 $c$를 $m$으로 복호화할 수 있어야 한다.
- 모든 공격하는 사람 (Eve)에 의해 모든 암호화된 메시지 $c$를 $m$으로 복호화하는 것이 불가능하다는 것을 보장해야 한다.
- 암호의 적용: 서명과 인증 - 인터넷 뱅킹 (90년도에는 Phone Banking, 해킹 가능했음), 증명서, 비트코인 등

### [1.2] Russel's Paradox
---
> 이 문장은 거짓이다.
{: .prompt-tip}

다음 문장은 참일까 거짓일까?
- 문장 전체가 참이라고 가정하면, 내용이 "이 문장은 거짓" 이라고 했으므로 문장 전체가 거짓이 된다.
- 문장 전체가 거짓이라고 가정하면, 내용이 "이 문장은 거짓" 이라고 했으므로 문장 전체가 참이 된다.

Self reference 문장은 다음과 같이 Paradox가 발생한다. 이를 설명할 수 있는 유일한 방법은, 이 문장이 말이 아니라는 것으로 결론내는 것이다. 이와 비슷한 Paradox로 Barber's paradox가 있다.

#### Russel's Paradox
> 집합의 정의는 무엇인가?
{: .prompt-tip}

우리는 초등학교 때 집합이 "포함관계가 명확한 것" 이라고 배웠다. 예를 들면 $$\{1, 2, 3\}, \{apple, pear\}$$ 는 집합이 맞지만, $$\{ 아름다운\ 얼굴 \}$$은 집합이 아니다. 이런 정의는 불분명하기 떄문에 엄밀하게 집합을 정의할 필요가 있다.

따라서 먼저 집합의 property를 정의해보자.

> 집합은 자기 자신(itself)을 원소로 가지지 않는다. 예를 들어 $$\{ 1, \{ 1, \{ 1, \{...\}\}$$ 같은 것은 자기 자신을 원소로 가지기 떄문에 집합으로 치지 않겠다는 의미이다.
{: .prompt-info}

이제 $S$가 위의 성질을 만족하는 모든 가능한 집합들을 모아놓은 집합이라고 하자. (the set of all possible sets)
- **$S$가 집합이라면** $S$는 모든 가능한 집합을 모아놨기 때문에 $S$는 $S$의 원소이다. 그럼 $S$는 자기 자신을 원소로 가지므로, **$S$는 집합이 아니다!**
- **$S$가 집합이 아니라면** $S$는 자기 자신을 원소로 가진다. 그럼 $S$는 모든 가능한 집합 중 하나이므로, **$S$는 집합이다!**

이렇게 여기서도 Self Reference에 의해 Paradox가 발생한다. 이거 때문에 Russel이 집합론 자체를 다시 쓰게 되었다. 이 집합론은 추후에 더 자세히 다룰 예정이다.

### [1.3] Random Number is incompressible
---
- $12121212$
- $15926535$

다음 두 숫자 중 어떤 것이 더 랜덤한 숫자로 보이는가? 후자가 더 랜덤해보인다고 생각이 들겠지만, 사실 저 숫자는 원주율의 $3.1415926535$ 에서 온 숫자이다. 그러면 이제 이 숫자가 랜덤하다고 볼 수 있을까?

#### Johnson's Paradox
이번에는 $0000$부터 $9999$ 까지 번호판이 있는 $10000$대의 자동차 중에서 매일 2대의 차량을 본다고 하자. 어떤 날 $0000$과 $9999$ 번호를 동시에 봤다면 우리는 매우 놀라게 된다. 그러나 $4237,\ 9342$를 볼 확률도 똑같은데 왜 우리는 전자의 경우만 놀라게 되는 것일까? 이게 사람한테만 적용되는 걸까? 아니면 우주의 어떤 외계인이 와서 보더라도 놀라게 될만한 객관적인 이유가 있는 것일까?

결론부터 말하자면 $4237,\ 9342$은 랜덤한 숫자, $0000,\ 9999$는 랜덤하지 않은 수이기 때문에 놀라는 것이고 이것은 우주에서 외계인이 와도 똑같이 느낄만한 객관적인 이유이다. 그럼 랜덤하다는 것은 도대체 무엇일까?

#### Compression
> **어떤 숫자가 압축 가능(Compressive)하면 그 숫자는 random 하지 않다.**
{: .prompt-tip}
예를 들어, 컴퓨터에서 zip 파일로 압축을 하는걸 생각해보면 $\text{10MB}$ 크기의 파일을 $\text{7MB}$로 압축시킬 수 있다. 여기서 압축은 원본 복구가 가능한 압축만을 전제로 한다. (lossless compression) 즉, 원본 파일이 다르면, 압축된 결과도 다르다. ($X \ne Y$ 이면 $C(X) \ne C(Y)$)

<br />
> 모든 파일을 원본 복구가 가능하도록 압축할 수 있는가?
{: .prompt-warning}

모든 파일을 $$\text{60%}$$ 크기로 압축할 수 있는 프로그램이 있다고 가정해보자. $\text{1,000MB}$ 크기의 파일을 압축시키면 $\text{600MB}$ 가 되고, 그 압축된 파일을 또 새로 압축시키면 $\text{360MB}$가 되고... 이 과정을 계속 반복해서 압축하면 파일의 크기가 결국 크기가 $0$이 되어 파일이 없어지게 된다. 크기가 $0$인 파일은 원본으로 복구할 수가 없다. 즉, 모순이 발생하므로 모든 파일을 압축할 수 있다는 가정이 틀렸다. 즉, **어떤 파일은 더 이상 압축할 수 없다.**

다시 위의 Johnson's paradox 예시로 돌아가보자. 우리 사람도 무의식적으로 패턴이 있는 숫자를 압축해서 기억한다. 예를 들어 $0000$과 $9999$는 "0 4개와 9 4개를 동시에 봤어!" 라고 정보양이 줄어들어 말하기도 쉽고 기억하기 쉬운 반면에 "4237과 9342를 동시에 봤어!"는 말하기도 어렵고 기억하기도 어려운 숫자이다. 그럼 $0000$, $9999$를 보고 놀라는 이유는 그 숫자를 볼 확률이 매우 적기 때문인데, 그 이유는 무엇일까? 정답은 압축이 가능한 숫자를 볼 확률이 훨씬 적기 때문이다. 그럼 압축이 되는 숫자들의 비율은 얼마나 되는 것일까?

#### Portion of random number
1. $n$비트로 표현되는 모든 자연수는 각 자리가 $0$ 아니면 $1$이므로 총 $2^n$개가 존재한다. 
2. 최소 한 비트는 줄어들어야 압축되었다고 말할 수 있다. 따라서 압축된 결과는 $n-1,\ n-2,\ \dots, 1, 0$ 비트까지 줄어들 수 있다.
  - $0$ 비트의 결과물은 $1$개 존재한다.
  - $1$ 비트의 결과물은 $2^1$개 존재한다.
  - $2$ 비트의 결과물은 $2^2$개 존재한다.
  - ... 
  - $n-1$ 비트의 결과물은 $2^{n-1}$개 존재한다.
- **따라서 압축된 전체 결과물은 $2^0 + 2^1 + \dots + 2^{n-1} = 2^n-1$개가 존재한다.** 
3. $X \ne Y$ 이면 $C(X) \ne C(Y)$ 즉, 원본과 압축된 결과가 일대일 대응이어야 하는데, 원본이 $2^n$개이고 압축된 결과가 $2^{n-1}$개 이므로 비둘기집 원리에 의해 적어도 하나의 자연수는 압축되지 않는다는 것을 의미한다.

위의 경우는 실제 상황보다 매우 너그럽게 한 비트만 줄어든 것으로 가정했는데도 압축이 안되는 숫자가 생긴 것이다! 실제로는 압축을 하면 압축이 되었다는 것을 표시해야 하고, 그 이외에도 여러 오버헤드가 생길 수 있기 때문에 압축된 결과는 한 비트 이상 줄어들게 된다. 압축된 결과가 두 비트가 줄어들면 압축된 전체 결과물은 $2^{n-1}$개가 줄어들고, 세 비트가 줄어들면 $2^{n-2}$개가 줄어든다. 이렇게 계속 줄이다보면 압축되는 숫자의 비율이 매우 적은 것을 알 수 있다. 따라서 실제로는 대부분의 숫자가 **압축되지 않는 숫자, 즉 랜덤한 숫자**이다.

### [1.4] Paradox of Randomness: Kolmogorov complexity
---
> 해당 내용은 Kolmogorov complexity 내용을 간략하게 설명한 것이다. 자세한 내용은 [Wikipedia - Kolmogorov complexity](https://ko.wikipedia.org/wiki/%EC%BD%9C%EB%AA%A8%EA%B3%A0%EB%A1%9C%ED%94%84_%EB%B3%B5%EC%9E%A1%EB%8F%84) 에서 확인할 수 있다.

숫자가 압축 가능한지를 어떻게 판단할 수 있을까? 다음과 같이 왼쪽에는 자연수, 오른쪽에는 그 자연수를 가장 짧게 나타낸 표현을 써보자.
- $10000000000000000000000000000000000000000 \rightarrow$ $P1,40P0$
- $12376237462763832348223423523532432543345 \rightarrow$ ??

위와 같은 숫자는 명백히 더 짧은 표현으로 압축이 되는데, 아래 숫자는 더 짧은 표현이 있는지 확실하지가 않다. 표현할 수 있는 어떤 표현의 길이가 그 숫자의 길이보다 길면 그 숫자는 압축되지 않는 숫자인 것이다.

이제 위의 개념을 가지고 모든 자연수에 대응되는 제일 짧은 압축 표현을 쓴 압축 테이블을 생성했다고 가정해보자.

$$ 
\begin{array}{c|cc}
\text{Numbers} & \text{Shortest Expression} \\
\hline
     1 & P1 \\
    \hline
     2& P2 \\
    \hline
    3 & P3 \\
    \hline
    \dots & \dots \\
    \hline
    100000000000000000000 & P1,20P0 \\
    \hline
    \dots & \dots \\
    \hline
\end{array}
$$

> $S:$ `The smallest number not representable with less than or equal to 20 words`

- 한 글자로 표현되는 코드의 개수는 유한하다. 두 글자로 표현되는 코드의 개수도 유한하다. 이를 반복하면 20글자로 표현되는 코드의 개수까지도 유한한 것을 알 수 있다. 
- 따라서, 20단어 이하로 표현할 수 없는 가장 작은 수는 21글자로 표현되는 자연수 중 가장 작은 자연수이다. 그 자연수를 $X$라 하자.
- 근데 위의 표현 $S$는 $X$의 길이보다 짧은 13글자인데도 $X$를 표현하고 있다. 따라서 Paradox가 발생한다!

이 문제를 해결하기 위한 정답은 바로 압축 테이블을 만드는게 불가능하다는 것이다. 다른 의미로는 압축된 표현을 봐도 그게 정답이라는 것을 모른다는 것이다. 그게 실제 정답일지라도 우리는 정답인지 알 수 없다는 것이다. 정답이라는 것을 알 수 있게되면 저 13글자같은 모순이 튀어나온다. 마치 내일 주식이 오른다고 확신해도 실제 내일 주식 가격을 모르는 것과 비슷한 의미이다. 

- 따라서, 어떤 숫자가 압축된 표현이 하나라도 존재하면 랜덤이 아닌 숫자라는 것은 판단할 수 있지만, 어떤 숫자가 랜덤이라는 것은 끝까지 확정할 수 없다.
- 즉 대부분의 숫자가 랜덤인데, 실제 랜덤 숫자를 봐도 랜덤인 것을 모른다.

### [1.5] Halting problem in Complexity Theory
---
- 암호학의 두 가지 축: Complexity Theory, Number Theory

Complexity Theory는 문제의 난이도에 대한 이야기이다. 암호학에서 목적은 공격자 Eve가 문제를 풀 수 없도록 하는 것이 목표이기 때문에, 우리는 풀 수 없는 문제가 무엇인지를 알고자 한다. 그 중의 한가지 예시가 **Halting Problem**이다.

#### Halting Problem
- $M$: Machine (Program)
- $X$: Input (Any string)
- $M(X)$: $M$에 input $X$를 주고 돌린 결과 Output / State
- $H$: $M$, $X$가 주어졌을 때 이 기계가 멈추는지 안멈추는지를 Yes/No 로 출력하는 기계 

#### Proof from Berry's Paradox

$$ 
\begin{array}{c|cc}
\text{Numbers} & \text{Shortest Expression} \\
\hline
     1 & P1 \\
    \hline
     2& P2 \\
    \hline
    3 & P3 \\
    \hline
    \dots & \dots \\
    \hline
    100000000000000000000 & P1,20P0 \\
    \hline
    \dots & \dots \\
    \hline
\end{array}
$$

- 저번에 언급한 압축 테이블(각 자연수별 가장 짧은 표현을 모은 테이블)을 만드려고 시도해보자. 
- 오른쪽 표현을 채우기 위해서 길이가 1인 모든 프로그램, 길이가 2인 모든 프로그램, ... 을 모두 적고 컴파일 되는 것들만 전부 실행시켜서 결과를 다 적어보자.
- 근데 이렇게 하면 저번과 같은 "20단어 이하로 표현할 수 없는 가장 작은 수" 라는 20단어 이하의 표현이 나타나고, 이는 Berry's paradox를 유발한다. 그럼 무엇이 잘못된걸까?

> 컴파일 되는 것들 중 전부 실행시켜서 결과를 적자고 했으나, 그 중에서는 **영원히 안 끝나는 프로그램이 존재한다!** 즉, 프로그램들의 출력된 결과를 모두 적는다는 것이 불가능하다. 
{: .prompt-danger}

> **If Halting is solvable?** <br/> 어떤 프로그램이 끝날지 안 끝날지를 판단할 수 있다고 가정해보자. 이 경우 두 가지 문제점이 발생한다.
1. 끝나는 프로그램들만 모아서 압축 테이블을 다 만들었을 경우, Berry's paradox가 발생한다.
2. 어떤 표현 중에는 이 프로그램을 Self reference 하는 표현이 있을 수 있다. 이 경우, 이 프로그램은 재귀 과정을 무한히 반복하여 영원히 안 끝나게 된다. 그럼 $H$가 이 프로그램을 안 멈춘다고 결과를 출력하면 그 재귀가 끝나게 되어 빠져나가고 이 프로그램은 멈추게 된다. 따라서, 모순이 발생한다.
{: .prompt-tip}

결론은 압축 테이블을 만드는 것 (압축된 가장 짧은 표현을 찾는 것)이 불가능해야 하고, 이는 곧 **Halting 문제가 unsolvable 하다는 것**을 의미한다.